# -*- coding: utf-8 -*-
# -*- python -*-
# Author: Luo Jinghua

import os
import sys

Import(['env', 'gameenv'])
env = env.Clone()
srcs = ["Buffer.cpp", "ButtonWidget.cpp", "Checkbox.cpp", "Common.cpp",
        "CritSect.cpp", "CursorWidget.cpp", "Debug.cpp", "DescParser.cpp",
        "DialogButton.cpp", "Dialog.cpp", "EditWidget.cpp", "Flags.cpp",
        "Font.cpp", "NativeFont.cpp", "Color.cpp", "Graphics.cpp", "HTTPTransfer.cpp",
        "HyperlinkWidget.cpp", "Image.cpp", "ImageFont.cpp", "Insets.cpp",
        "KeyCodes.cpp", "ListWidget.cpp", "MemoryImage.cpp", "ModVal.cpp",
        "MTRand.cpp", "MusicInterface.cpp", "NativeDisplay.cpp", "PerfTimer.cpp",
        "PropertiesParser.cpp", "Quantize.cpp", "Ratio.cpp", "ResourceManager.cpp",
        "ScrollbarWidget.cpp", "ScrollbuttonWidget.cpp", "SEHCatcher.cpp",
        "SexyAppBase.cpp", "SexyMatrix.cpp", "SharedImage.cpp", "Slider.cpp",
        "SWTri.cpp", "TextWidget.cpp", "WidgetContainer.cpp", "Widget.cpp",
        "WidgetManager.cpp", "XMLParser.cpp"]
srcs += ["DFBImage.cpp", "DFBFont.cpp", "DFBInterface.cpp"]
srcs += ["DummySoundManager.cpp", "DummySoundInstance.cpp"]
env.ParseConfig('pkg-config directfb --cflags --libs')

env.AppendUnique(CPPPATH = [os.path.join('..', 'ImageLib'),
                            os.path.join('..', 'PakLib')],
                 LIBPATH = [os.path.join('..', 'ImageLib'),
                            os.path.join('..', 'PakLib')],
                 LIBS = ['PakLib', 'ImageLib', 'rt'])

srcs += ["GLImage.cpp", "GLInterface.cpp"]
srcs += ["GLXInterface.cpp"]
env.AppendUnique(LIBS = ['GL', 'GLX'])

if gameenv['BUILD_STATIC']:
    gameenv.ParseConfig('pkg-config directfb --cflags --libs')
    gameenv.AppendUnique(LIBPATH = [os.path.join('..', 'ImageLib'),
                                    os.path.join('..', 'PakLib')],
                         LIBS = ['PakLib', 'ImageLib', 'rt'])
    gameenv.AppendUnique(LIBS = ['GL', 'X11'])

if gameenv['BUILD_STATIC']:
    env.Library('SexyAppFramework', srcs)
else:
    env.SharedLibrary('SexyAppFramework', srcs)
